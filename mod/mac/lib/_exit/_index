
xrc:mod:lib             \
    mac                 \
    _exit/logout        \
    _exit/restart       \
    _exit/shutdown      \
    _exit/sleep

___x_cmd_mac_screensave(){
    ___x_cmd_mac___cmd open -a ScreenSaverEngine
}

___x_cmd_mac___cmd(){
    local IFS=" "
    mac:debug --cmd "$*" "running comand"

    "$@"
}

___x_cmd_mac_lock(){
    # REQUIRE PRIV: osascript -e 'tell application "System Events" to keystroke "q" using {control down, command down}'
    # DREPECATED: "/System/Library/CoreServices/Menu Extras/User.menu/Contents/Resources/CGSession" -suspend
    # NOT-WORKED: caffeinate -u -t 1
    # ___x_cmd_mac___cmd osascript -e 'tell application "System Events" to keystroke "q" using {control down, command down}'


    mac:info "To lock the Mac successfully, you need to grant the terminal app with the priviledge of of controlling your Mac."

    osascript -e 'tell application "System Events" to keystroke "q" using {control down, command down}' || \
        N=mac M="You need to grant prilidge of controling you Mac to the app which run this command." log:ret:1
}
